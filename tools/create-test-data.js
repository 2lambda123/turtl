/**
 * This file defines (and creates) our database schema.
 *
 * NOTE: we make liberal use of the text type because in postgres there's no
 * difference between varchar and text under the hood, but varchar can be
 * excessively limiting and hard to change later on.
 */

var db = require('../helpers/db');
var config = require('../helpers/config');
var Promise = require('bluebird');

var test_queries = [];

test_queries.push('INSERT INTO users (id, username, auth, confirmed, data, storage_mb, created, updated, confirmation_token) VALUES (51, \'testdata@turtlapp.com\', \'jcbqYSoTFIaOu3wm0gG1jHzQ3BiXr/joZiRONRMntI7AUjNsCHCPXkRX8WA/eMmD2Vg3UHkm4XHnXj4u0KTcpZbE5S9xVkseWK2x4tlchKTEKVNKGR5qjJ95hCHlnBfh6lf9Vr0Zw1Uu2A1B1xZZvv507Cnp8Uh3a+LHbqhkHTk=\', true, \'{"body": "AAYBAAwjKLeuAoW1z+IeIOk+xO9j3csegi0CrsWwZ97BPeDQMFaVjf5vdURNRTQL1r8cfq01vg1uwLsafcaRuy5/InfWjNGo/Qecu8LfAsU1bzA507g+w1MskPHGrLlnLLXfh+5GvA5W5RApGLEniPQfkzhFSSdWXWaVN8cPjWqvUKfv+Ys01UMC5WiW0j2jqp/53UQOAQO2H2gipUPpFMur80fg1kXLVBaLk0p0EniWliz+2Ws06bZoVKbJth5313fj851AmUKicI4=", "pubkey": "K9ky1IUbjteWnrJqq1ikpG2y7qahpVVka070FHj5/zU=", "username": "testdata@turtlapp.com"}\', 100, \'2017-04-26 14:19:37.908492\', \'2017-07-20 18:22:27.809827\', \'4e9ce331632f903a42b4ec068c92905fad5c58dabc2e6645a569425ccd00db9bf5e55840bf13eb031b1273d003284a5dbb9df182d8eb905eda4ede3ca760842a\') ON CONFLICT DO NOTHING;');

test_queries.push('INSERT INTO keychain (id, user_id, data, created, updated, item_id) VALUES (\'015bac22440b4944baee41b88207731eaeb7e2cc5c955fb8a05b028c1409aaf55024f5d26fa30020\', 51, \'{"id": "015bac22440b4944baee41b88207731eaeb7e2cc5c955fb8a05b028c1409aaf55024f5d26fa30020", "body": "AAYBAAzItyj4i/DM23qp6INWFmrrUEaGWfzG9ItBgS59aFqpkcKteJw0K9GRaI9O12YJgpr342LYK0RUhx8JEbF7ax/+atBpLa08bN70DQb/HQ2shQ==", "type": "space", "item_id": "015bac22440a4944baee41b88207731eaeb7e2cc5c955fb8a05b028c1409aaf55024f5d26fa3001e", "user_id": 51}\', \'2017-04-26 14:19:40.747965\', \'2017-04-26 14:19:40.747965\', \'015bac22440a4944baee41b88207731eaeb7e2cc5c955fb8a05b028c1409aaf55024f5d26fa3001e\') ON CONFLICT DO NOTHING;');
test_queries.push('INSERT INTO keychain (id, user_id, data, created, updated, item_id) VALUES (\'015bac2244c84944baee41b88207731eaeb7e2cc5c955fb8a05b028c1409aaf55024f5d26fa30028\', 51, \'{"id": "015bac2244c84944baee41b88207731eaeb7e2cc5c955fb8a05b028c1409aaf55024f5d26fa30028", "body": "AAYBAAxaBbCOZZ2s2NUKm8SCiFIiR8gtOUpiperVvs/bSTMKNzCgPV1f4Zn1ZSP369yt0GgaqzaKRzVXmPxf+52u6HT73/CF64A/fLAjfQPLoe4DLQ==", "type": "space", "item_id": "015bac2244c84944baee41b88207731eaeb7e2cc5c955fb8a05b028c1409aaf55024f5d26fa30026", "user_id": 51}\', \'2017-04-26 14:19:40.805721\', \'2017-04-26 14:19:40.805721\', \'015bac2244c84944baee41b88207731eaeb7e2cc5c955fb8a05b028c1409aaf55024f5d26fa30026\') ON CONFLICT DO NOTHING;');
test_queries.push('INSERT INTO keychain (id, user_id, data, created, updated, item_id) VALUES (\'015bac2244d44944baee41b88207731eaeb7e2cc5c955fb8a05b028c1409aaf55024f5d26fa30030\', 51, \'{"id": "015bac2244d44944baee41b88207731eaeb7e2cc5c955fb8a05b028c1409aaf55024f5d26fa30030", "body": "AAYBAAw9/03JRoFco1ItIHeilajnpFXxxdqU7JLJDW6byNOQMi7lQhDtl7pLh99lyT6nYNXH1m/CG8sJ6GgXfYYyPWpj1OaFao0wIPux9HQuvqD6BA==", "type": "space", "item_id": "015bac2244d44944baee41b88207731eaeb7e2cc5c955fb8a05b028c1409aaf55024f5d26fa3002e", "user_id": 51}\', \'2017-04-26 14:19:40.84498\', \'2017-04-26 14:19:40.84498\', \'015bac2244d44944baee41b88207731eaeb7e2cc5c955fb8a05b028c1409aaf55024f5d26fa3002e\') ON CONFLICT DO NOTHING;');

test_queries.push('INSERT INTO spaces (id, data, created, updated) VALUES (\'015bac22440a4944baee41b88207731eaeb7e2cc5c955fb8a05b028c1409aaf55024f5d26fa3001e\', \'{"id": "015bac22440a4944baee41b88207731eaeb7e2cc5c955fb8a05b028c1409aaf55024f5d26fa3001e", "body": "AAYBAAzSnOFnsF8LgCqQbQDhjowbdfeuWYRfRevmY/ie0GOeJhEbxaaloFsT7wblZjYMGd+ocL0TKvUYqO0U/qJEwFM2Uh0=", "user_id": 51}\', \'2017-04-26 14:19:40.77206\', \'2017-04-27 19:15:32.871628\') ON CONFLICT DO NOTHING;');
test_queries.push('INSERT INTO spaces (id, data, created, updated) VALUES (\'015bac2244c84944baee41b88207731eaeb7e2cc5c955fb8a05b028c1409aaf55024f5d26fa30026\', \'{"id": "015bac2244c84944baee41b88207731eaeb7e2cc5c955fb8a05b028c1409aaf55024f5d26fa30026", "body": "AAYBAAweqy/gx9HTkvkQXNgCvSyVApuJKXEOJNTqlEU8udrW2qb5/gzjdn5dOh/fCI9HHUzyYysiFG739oLBTexxdg==", "user_id": 51}\', \'2017-04-26 14:19:40.816505\', \'2017-04-26 14:19:40.816505\') ON CONFLICT DO NOTHING;');
test_queries.push('INSERT INTO spaces (id, data, created, updated) VALUES (\'015bac2244d44944baee41b88207731eaeb7e2cc5c955fb8a05b028c1409aaf55024f5d26fa3002e\', \'{"id": "015bac2244d44944baee41b88207731eaeb7e2cc5c955fb8a05b028c1409aaf55024f5d26fa3002e", "body": "AAYBAAzAf7huCdGhIfZ8LakfUsgOLXsKxsMkK1ulo7G+lTEElums6ViZ8SLxFUnF3kn1BDtbN29sT8NAxCDlKskFkg==", "user_id": 51}\', \'2017-04-26 14:19:40.86804\', \'2017-04-26 14:19:40.86804\') ON CONFLICT DO NOTHING;');

test_queries.push('INSERT INTO spaces_users (id, space_id, user_id, role, created, updated) VALUES (90, \'015bac22440a4944baee41b88207731eaeb7e2cc5c955fb8a05b028c1409aaf55024f5d26fa3001e\', 51, \'owner\', \'2017-04-26 14:19:40.782147\', \'2017-04-26 14:19:40.782147\') ON CONFLICT DO NOTHING;');
test_queries.push('INSERT INTO spaces_users (id, space_id, user_id, role, created, updated) VALUES (91, \'015bac2244c84944baee41b88207731eaeb7e2cc5c955fb8a05b028c1409aaf55024f5d26fa30026\', 51, \'owner\', \'2017-04-26 14:19:40.819202\', \'2017-04-26 14:19:40.819202\') ON CONFLICT DO NOTHING;');
test_queries.push('INSERT INTO spaces_users (id, space_id, user_id, role, created, updated) VALUES (92, \'015bac2244d44944baee41b88207731eaeb7e2cc5c955fb8a05b028c1409aaf55024f5d26fa3002e\', 51, \'owner\', \'2017-04-26 14:19:40.871514\', \'2017-04-26 14:19:40.871514\') ON CONFLICT DO NOTHING;');

test_queries.push('INSERT INTO boards (id, space_id, data, created, updated) VALUES (\'015bac2244ea4944baee41b88207731eaeb7e2cc5c955fb8a05b028c1409aaf55024f5d26fa30034\', \'015bac22440a4944baee41b88207731eaeb7e2cc5c955fb8a05b028c1409aaf55024f5d26fa3001e\', \'{"id": "015bac2244ea4944baee41b88207731eaeb7e2cc5c955fb8a05b028c1409aaf55024f5d26fa30034", "body": "AAYBAAxEVD6FeHQaEl9yh3M9LVJTh0poYU8FA1SxwYVn/8N1SBNYBYzuWcfXMoTFrmz0CHum", "keys": [{"k": "AAYBAAz9znE+csObRfJh7v1+vILRefrGx/ZC97qtGetYvtPYr3gO4v4AnhWPP/z49ESptJ1aSIOWTzPKBt5B1fI=", "s": "015bac22440a4944baee41b88207731eaeb7e2cc5c955fb8a05b028c1409aaf55024f5d26fa3001e"}], "user_id": 51, "space_id": "015bac22440a4944baee41b88207731eaeb7e2cc5c955fb8a05b028c1409aaf55024f5d26fa3001e"}\', \'2017-04-26 14:19:40.893856\', \'2017-04-26 14:19:40.893856\') ON CONFLICT DO NOTHING;');
test_queries.push('INSERT INTO boards (id, space_id, data, created, updated) VALUES (\'015bac2244f54944baee41b88207731eaeb7e2cc5c955fb8a05b028c1409aaf55024f5d26fa30039\', \'015bac22440a4944baee41b88207731eaeb7e2cc5c955fb8a05b028c1409aaf55024f5d26fa3001e\', \'{"id": "015bac2244f54944baee41b88207731eaeb7e2cc5c955fb8a05b028c1409aaf55024f5d26fa30039", "body": "AAYBAAyijrKoEz3RznfMJslv2qO17BqmiYP8SgDW1i/AkC/O50Y6jizxq2cljfwlwRn0", "keys": [{"k": "AAYBAAwYIRhvHsm43RJnwXRXCIGnzCs2e+eBW6Wzyr+ojo00PY123AmMGMSqq6IStUrSbteDdxG4iRZEyBJwY8g=", "s": "015bac22440a4944baee41b88207731eaeb7e2cc5c955fb8a05b028c1409aaf55024f5d26fa3001e"}], "user_id": 51, "space_id": "015bac22440a4944baee41b88207731eaeb7e2cc5c955fb8a05b028c1409aaf55024f5d26fa3001e"}\', \'2017-04-26 14:19:40.911344\', \'2017-04-26 14:19:40.911344\') ON CONFLICT DO NOTHING;');
test_queries.push('INSERT INTO boards (id, space_id, data, created, updated) VALUES (\'015bac2245044944baee41b88207731eaeb7e2cc5c955fb8a05b028c1409aaf55024f5d26fa3003e\', \'015bac22440a4944baee41b88207731eaeb7e2cc5c955fb8a05b028c1409aaf55024f5d26fa3001e\', \'{"id": "015bac2245044944baee41b88207731eaeb7e2cc5c955fb8a05b028c1409aaf55024f5d26fa3003e", "body": "AAYBAAzXFMlrh9a4hWujp2PKTeXoSMbfSwX2YpPgC6mg2IoUSfO4/NU8bbVQNTV+pG64PRBz", "keys": [{"k": "AAYBAAyr/nHZWKTTcsvdokRUReLnUDM60/D0BigVJ1sRcGZg3cQ1M0ocZzC45nehLqw5iJAO/N2RP/AKoKOqTio=", "s": "015bac22440a4944baee41b88207731eaeb7e2cc5c955fb8a05b028c1409aaf55024f5d26fa3001e"}], "user_id": 51, "space_id": "015bac22440a4944baee41b88207731eaeb7e2cc5c955fb8a05b028c1409aaf55024f5d26fa3001e"}\', \'2017-04-26 14:19:40.930231\', \'2017-04-26 14:19:40.930231\') ON CONFLICT DO NOTHING;');

test_queries.push('INSERT INTO notes (id, space_id, board_id, data, created, updated) VALUES (\'015ce7ea7f742af6297cf0cc29180f9cc45f4c80e5b30238581f845367f9c404ef3fb8fb0a5a00aa\', \'015bac22440a4944baee41b88207731eaeb7e2cc5c955fb8a05b028c1409aaf55024f5d26fa3001e\', \'015bac2244ea4944baee41b88207731eaeb7e2cc5c955fb8a05b028c1409aaf55024f5d26fa30034\', \'{"id": "015ce7ea7f742af6297cf0cc29180f9cc45f4c80e5b30238581f845367f9c404ef3fb8fb0a5a00aa", "mod": 1498539524, "body": "AAYBAAxc9IwivKewKefuur8wn/FNbzic0iumwistONOnzewNQLrkdNoAEzeVT4dHc7oDlwrks4XZ3p4k3rkYUVjBf7qvAysN66iriXZwATU4YggKN1jCl+SvseuXBaRd1dkhADiQ7FJ8p9v7CMI3acA+13J66D/l5TuN01tQU6bHtYghwGWzOw8rMRAYNBait36+3C0iKLeJ8TStROS6cM1SlrvjudaC1uv9YVkYdfdHGDi1kOWGtwb/N4XZi70=", "keys": [{"k": "AAYBAAznB2cCD5W7QiOmu83X1jLukrnwfONjTEhHF+V/IdHb4mAKGXisF3Sxy62kYP+4kC7Zi1vqQHTpGQ4ZPjM=", "s": "015bac22440a4944baee41b88207731eaeb7e2cc5c955fb8a05b028c1409aaf55024f5d26fa3001e"}, {"b": "015bac2244ea4944baee41b88207731eaeb7e2cc5c955fb8a05b028c1409aaf55024f5d26fa30034", "k": "AAYBAAwaJPw5RwH4vdAFFX2Cdwj/s6p4CKjhm2EtpmBsqKVDDP+gBGD1YOnWvXh/48WfCBY4uSQwPREadTjXhuA="}], "user_id": 51, "board_id": "015bac2244ea4944baee41b88207731eaeb7e2cc5c955fb8a05b028c1409aaf55024f5d26fa30034", "space_id": "015bac22440a4944baee41b88207731eaeb7e2cc5c955fb8a05b028c1409aaf55024f5d26fa3001e"}\', \'2017-06-29 00:12:45.841695\', \'2017-07-16 20:14:16.633141\') ON CONFLICT DO NOTHING;');
test_queries.push('INSERT INTO notes (id, space_id, board_id, data, created, updated) VALUES (\'015caf7c5f4d2af6297cf0cc29180f9cc45f4c80e5b30238581f845367f9c404ef3fb8fb0a5a022b\', \'015bac22440a4944baee41b88207731eaeb7e2cc5c955fb8a05b028c1409aaf55024f5d26fa3001e\', \'015bac2244ea4944baee41b88207731eaeb7e2cc5c955fb8a05b028c1409aaf55024f5d26fa30034\', \'{"id": "015caf7c5f4d2af6297cf0cc29180f9cc45f4c80e5b30238581f845367f9c404ef3fb8fb0a5a022b", "mod": 1497592783, "body": "AAYBAAxn4lZjNtOesNLrTWFlvtU46XFdtlhkmw24SbWWWc7YlLYAfFfYBcTf9hAqzeTqWgiOM48Ln5+Iy6dnzBWWGoThV46arfPYBRwxXGpGLm/GRKnBpSwoGIJHc6l4pEgpUYn0ozU6hvxrLiFzTebWPZDGFQqJIT2uRC3Frzs/gtpn3cyec/alRtywrWzkRhIyXagHAoEI1sbGatojXD6f3YVQD9ZmF6qWvLNDTuP/qaCM/eM2Um/Nwzg=", "keys": [{"k": "AAYBAAzbm2cMWZVRzKHwY34FmdBwOpyzTusHMLbb07K60bvi8FaK7QaVzx1GQlds8R/qlb5shkaTw+7nhTTB6sA=", "s": "015bac22440a4944baee41b88207731eaeb7e2cc5c955fb8a05b028c1409aaf55024f5d26fa3001e"}, {"b": "015bac2244ea4944baee41b88207731eaeb7e2cc5c955fb8a05b028c1409aaf55024f5d26fa30034", "k": "AAYBAAzKi0OOAhS4eNCKJdeVt+P//PERRjgaMOBOdCxqfk9NIe6TEQW1Arx40c4YuVInAi9HhHTtuaWZ+rzydDk="}], "user_id": 51, "board_id": "015bac2244ea4944baee41b88207731eaeb7e2cc5c955fb8a05b028c1409aaf55024f5d26fa30034", "space_id": "015bac22440a4944baee41b88207731eaeb7e2cc5c955fb8a05b028c1409aaf55024f5d26fa3001e"}\', \'2017-06-15 23:01:51.222958\', \'2017-07-16 20:14:16.703554\') ON CONFLICT DO NOTHING;');
test_queries.push('INSERT INTO notes (id, space_id, board_id, data, created, updated) VALUES (\'015caf78be502af6297cf0cc29180f9cc45f4c80e5b30238581f845367f9c404ef3fb8fb0a5a018e\', \'015bac22440a4944baee41b88207731eaeb7e2cc5c955fb8a05b028c1409aaf55024f5d26fa3001e\', NULL, \'{"id": "015caf78be502af6297cf0cc29180f9cc45f4c80e5b30238581f845367f9c404ef3fb8fb0a5a018e", "mod": 1497592545, "body": "AAYBAAzChZjAOGoAQ0MMjLofXXHarNfUu9Eqlv/063dUH4kbrp8Mnmw+XIn7LxAHloxdMpdiVDz5SAcLyy5DftjOjEEwKfylexz+C9zq5CQSjsQzuRQYMxD7TAwiJZLd+CsM1msek0kkhIB2whG6plMC8Hlyu1bMdcvWJ3B7Oonp89V57ycedVsSMWE28ablc3X3aKO8LRjCnoZlOK/UbZZYQnkm4roGV8dWlbKziTHm8R9ctBrxceo5ky3molooQ6GPKIPbm+lomsyrGDBG4DBDd7KlMJ1LCcsXzYWLnqvQyYny2ly37l5x3Y4dOcZVZ0gxkSzvHe37AzQl", "keys": [{"k": "AAYBAAzuWB81LF46TLQ0b9aibwlL4lT5FTxw1UNxtUNKA2zuzW91drujc53uMQipFhcq6s6Ff9mDQr0Ew5H7Guw=", "s": "015bac22440a4944baee41b88207731eaeb7e2cc5c955fb8a05b028c1409aaf55024f5d26fa3001e"}], "user_id": 51, "board_id": null, "space_id": "015bac22440a4944baee41b88207731eaeb7e2cc5c955fb8a05b028c1409aaf55024f5d26fa3001e"}\', \'2017-06-15 22:57:09.698537\', \'2017-06-15 22:58:45.914093\') ON CONFLICT DO NOTHING;');
test_queries.push('INSERT INTO notes (id, space_id, board_id, data, created, updated) VALUES (\'015d0aee51102af6297cf0cc29180f9cc45f4c80e5b30238581f845367f9c404ef3fb8fb0a5a0249\', \'015bac2244c84944baee41b88207731eaeb7e2cc5c955fb8a05b028c1409aaf55024f5d26fa30026\', NULL, \'{"id": "015d0aee51102af6297cf0cc29180f9cc45f4c80e5b30238581f845367f9c404ef3fb8fb0a5a0249", "mod": 1499126977, "body": "AAYBAAzn9I3n6W0LvYaek6b0a9DODt4OW2iBh6/FIRDjinOCjGCLy+Dmd6rGJ/nvQiBt16Gfz69UKtcEn5DG3yULKEi+1AOx8dL5nVa7Of6UCFMM65gFNso/pGXuQHzUO/yaIdzY/A36YExC+ZDmd+ypmDnnlOggfUv48YeENpIrTuWqKl0r1tW4kZtSGNLsLZLqiii5YP3eDiqY6U1MaM8A6vAwXvSfgBCuQmcDel1tTIkhKs1E19VemWSy4TV0Rp46M9cQ/hTIQOc0nFPZOZMpXq6AIj8gxjpwKdMk6sRLq5L2CjEQxN/RnAcry1pPlNMfhmSxYfZRvTbHbzgJ6XGsGNddCaRDZe+AWECqM4qCthaSW0buUL6U03cez1uW3poWjyNqPfZex4gI", "keys": [{"k": "AAYBAAyKhhYKuPhgjwa8F6HDpCZf6ICXguP4UigRSdqA4mMfn6rbMIa7S6UxTO2YM074fPSVK1+thohhyqlUMqY=", "s": "015bac2244c84944baee41b88207731eaeb7e2cc5c955fb8a05b028c1409aaf55024f5d26fa30026"}], "user_id": 51, "board_id": null, "space_id": "015bac2244c84944baee41b88207731eaeb7e2cc5c955fb8a05b028c1409aaf55024f5d26fa30026"}\', \'2017-07-16 20:14:16.670239\', \'2017-07-16 20:14:16.68373\') ON CONFLICT DO NOTHING;');
test_queries.push('INSERT INTO notes (id, space_id, board_id, data, created, updated) VALUES (\'015d0b84f5562af6297cf0cc29180f9cc45f4c80e5b30238581f845367f9c404ef3fb8fb0a5a00f5\', \'015bac2244d44944baee41b88207731eaeb7e2cc5c955fb8a05b028c1409aaf55024f5d26fa3002e\', NULL, \'{"id": "015d0b84f5562af6297cf0cc29180f9cc45f4c80e5b30238581f845367f9c404ef3fb8fb0a5a00f5", "mod": 1499136849, "body": "AAYBAAx29ypcIgvsq0p1eSUSUDdJlBjm4N+4iLGRhBAg8EcLsb7p9F+akCMmvAtiQZXdw9UJaukm3h6oRUlRnDQ1ZqGhOwMtw0jrrlED6ycINX02rYfGpG6ll+Tmg3GziqgxJoBN3Z0sBjjcW4CeIze4qF6g+I0uO8gS+m/2BMsKDSbVscIAduiJmMSgGa4ixAWivb6U8rzPwHnI8WE=", "file": {"body": "AAYBAAyFhfeAC1Vl1PzT0wXCmEF8qhs9O46DAZ1Gi3dFfXcTe51d1SoXL1qo3ybGnzM80WpKQUHm3X2KiHXI+KNhjwDJoYCupc7rGocfqx8OtnGvdlcv1yMcCc9bP0W/4n2r0JC6q0QKffDVI2tY/r+E/3n+2uT9oTLBGhqI3kHLSn5MOKa/vt9N902a6ds=", "size": 174295}, "keys": [{"k": "AAYBAAwQRSkNGgPjGacaCSR0t+4GPLGbSDjZzLwBy0AeXiMxZTZN0RBA5jnTA8xt+qHKgqxgg9cuvhdq8fZOwGc=", "s": "015bac2244d44944baee41b88207731eaeb7e2cc5c955fb8a05b028c1409aaf55024f5d26fa3002e"}], "user_id": 51, "board_id": null, "has_file": true, "space_id": "015bac2244d44944baee41b88207731eaeb7e2cc5c955fb8a05b028c1409aaf55024f5d26fa3002e"}\', \'2017-07-16 20:14:16.736445\', \'2017-08-22 02:49:19.997614\') ON CONFLICT DO NOTHING;');

function run()
{
	console.log('- creating test data');
	return Promise.map(test_queries, function(qry) {
		return db.query(qry);
	}, {concurrency: 1})
		.then(function() { console.log('- done'); })
		.catch(function(err) { console.error(err, err.stack); })
		.finally(function() { setTimeout(process.exit, 100); });
}

run();

